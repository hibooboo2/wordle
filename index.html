<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Wordle Clone</title>
  <style>
    :root{
      --bg:#121213; --tile:#3a3a3c; --text:#d7dadc; --muted:#818384;
      --green:#538d4e; --yellow:#b59f3b; --gray:#3a3a3c; --kbd:#818384;
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    html,body{height:100%;}
    body{margin:0; background:var(--bg); color:var(--text); display:flex;align-items:center;justify-content:center;padding:24px}
    .container{
      width:80%;
      height:100%;
  border: 1px solid var(--tile);
    
    }
    h1{font-weight:700;margin:0 0 12px 0;text-align:center}

    .board {
  display: grid;
  grid-template-rows: repeat(6, 1fr);
  gap: 8px;
  margin: 24px auto;
  width: 350px;      /*fixed width for desktop*/
  max-width: 90vw;   /* allow shrink on small screens */
}

.tile {
  aspect-ratio: 1 / 1;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 32px;  /* bigger size for readability */
  border-radius: 6px;
  background: var(--tile);
  color: var(--text);
  text-transform: uppercase;
  user-select: none;
}


.row {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1vw;
}



    .tile.filled{border:2px solid rgba(255,255,255,0.05)}
    .tile.flip{animation:flip 450ms ease forwards}
    @keyframes flip{0%{transform:rotateX(0deg)}50%{transform:rotateX(90deg);background:var(--tile)}100%{transform:rotateX(0deg)}}
.keyboard {
  margin: 12px auto;
  display: flex;
  flex-direction: column;
  max-width: 90vw;
  gap: 8px;
}

.kb-row {
  display: flex;
  gap: 6px;
  justify-content: center;
  align-items: center;
  flex-wrap: nowrap;
}

.kb-row[data-cols] .key {
  flex: 1 1 auto;
  min-width: 50px;   /* readable key size */
  padding: 12px 0;
  font-size: 18px;
  text-align: center;
  border-radius: 6px;
  box-sizing: border-box;
}

.kb-row[data-cols] .key.big {
  flex: 1.5 1 auto;  /* ENTER/BACK are 1.5x wider */
  min-width: 75px;
}



/* visual key styles (keep your previous ones) */
.key{
  border-radius:6px;
  font-weight:700;
  cursor:pointer;
  user-select:none;
  background:var(--kbd);
  color:var(--text);
  font-size: 2em;
  width: 2em;
  text-align: center;
}

    .key.big{min-width:64px}
    .key.locked{opacity:0.5;pointer-events:none}
    .key.correct{background:var(--green);color:white}
    .key.present{background:var(--yellow);color:white}
    .key.absent{background:#1a1a1b;color:var(--muted)}

    .controls{display:flex;justify-content:space-between;align-items:center;margin-top:8px}
    .btn{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:6px 10px;border-radius:6px;color:var(--text);cursor:pointer}

    .message{min-height:22px;text-align:center;margin-top:12px;color:var(--muted)}

    .share{margin-top:10px;text-align:center}
    .small{font-size:0.85rem;color:var(--muted)}

    @media (max-width:520px){.tile{font-size:1.1rem}}
  </style>
</head>
<body>
  <div class="container" id="app">
    <h1>Wordle ‚Äî Clone</h1>
    <div class="board" id="board" aria-hidden="false"></div>

    <div class="keyboard" id="keyboard"></div>

    <div class="controls">
      <button class="btn" id="newBtn">New Game</button>
      <div class="small">Clone ‚Äî single file. <button class="btn" id="shareBtn">Share</button></div>
    </div>

    <div class="message" id="message"></div>
    <div class="share" id="shareArea"></div>
  </div>
  <script src="list.js"></script>
  <script>

   function loadWordsSync(url) {
  const xhr = new XMLHttpRequest();
  xhr.open("GET", url, false); // false = synchronous
  xhr.send(null);
  if (xhr.status === 200) {
    return xhr.responseText.split("\n").filter(w => w.length === 5);
  }
  return [];
}




  // For simplicity, guesses allowed are same as answers in this demo.
  const VALID = new Set(ANSWERS);

// Pick a random word from ANSWERS
function pickRandomWord() {
  const idx = Math.floor(Math.random() * ANSWERS.length);
  return ANSWERS[idx].toUpperCase();
}

  // game state
  const ROWS = 6, COLS = 5;
  let solution = pickRandomWord();
  let curRow = 0, curCol = 0;
  let board = Array.from({length:ROWS},()=>Array.from({length:COLS},()=>""));
  let status = Array.from({length:ROWS},()=>Array.from({length:COLS},()=>"")); // "correct","present","absent"
  let gameOver = false;

  // build UI
  const boardEl = document.getElementById('board');
  const keyboardEl = document.getElementById('keyboard');
  const messageEl = document.getElementById('message');
  const shareArea = document.getElementById('shareArea');

  function buildBoard(){
    boardEl.innerHTML = '';
    for(let r=0;r<ROWS;r++){
      const row = document.createElement('div'); row.className='row';
      for(let c=0;c<COLS;c++){
        const tile = document.createElement('div'); tile.className='tile';
        tile.id = `tile-${r}-${c}`;
        row.appendChild(tile);
      }
      boardEl.appendChild(row);
    }
  }

  const KBD = ["QWERTYUIOP","ASDFGHJKL","ZXCVBNM"];
  function buildKeyboard(){
    keyboardEl.innerHTML = '';
    KBD.forEach((row,ri)=>{
      const r = document.createElement('div'); r.className='kb-row';
      if(ri===2){
        const enter = makeKey('‚Ü©Ô∏è','big'); r.appendChild(enter);
      }
      row.split('').forEach(ch=>{
        const k = makeKey(ch);
        r.appendChild(k);
      });
      if(ri===2){
        const bk = makeKey('BACK','big'); r.appendChild(bk);
      }
      keyboardEl.appendChild(r);
    });
  }
  function makeKey(label,cl){
    const el = document.createElement('div'); el.className='key'+(cl?(' '+cl):''); el.textContent=label;
    el.addEventListener('click',()=>onKey(label));
    return el;
  }

  function onKey(k){
    if(gameOver) return;
    if(k==='ENTER') return onEnter();
    if(k==='BACK') return onBack();
    // letter
    if(curCol < COLS){
      board[curRow][curCol] = k;
      updateTile(curRow,curCol);
      curCol++;
    }
  }

  function onBack(){
    if(curCol>0){
      curCol--;
      board[curRow][curCol] = '';
      updateTile(curRow,curCol);
    }
  }

  function onEnter(){
    if(curCol !== COLS) { showMessage('Not enough letters'); return; }
    const guess = board[curRow].join('').toLowerCase();
    if(!VALID.has(guess)){ showMessage('Not in word list: ['+guess+']'); return; }
    // evaluate
    const evaluation = evaluateGuess(guess.toLowerCase(),solution.toLowerCase());
    status[curRow] = evaluation;
    flipRow(curRow, evaluation);
  }
  function evaluateGuess(guess, solution) {
  const result = Array(guess.length).fill('absent'); // default gray
  const solutionLetters = solution.split('');
console.log(guess,solution);
// 1Ô∏è‚É£ Mark correct positions (green)
for (let i = 0; i < guess.length; i++) {
  if (guess[i] === solution[i]) {
    result[i] = 'correct';
    solutionLetters[i] = null; // remove matched letter
    console.log(result);  
    }
  }

  // 2Ô∏è‚É£ Mark present letters (yellow)
  for (let i = 0; i < guess.length; i++) {
    if (result[i] === 'correct') continue;

    const index = solutionLetters.indexOf(guess[i]);
    if (index !== -1) {
      result[i] = 'present';
      solutionLetters[index] = null; // remove this instance
    }
  }

  return result;
}

function flipRow(r, evaluation) {
  for (let c = 0; c < COLS; c++) {
    const tile = document.getElementById(`tile-${r}-${c}`);
    const state = evaluation[c];

    // Set tile color right away
    if (state === 'correct') {
      tile.style.background = 'var(--green)';
      tile.style.color = '#fff';
    } else if (state === 'present') {
      tile.style.background = 'var(--yellow)';
      tile.style.color = '#fff';
    } else {
      tile.style.background = 'var(--tile)';
      tile.style.color = 'var(--muted)';
    }

    // Update keyboard coloring too
    markKey(board[r][c], state);
  }

  // After checking all letters
  if (evaluation.every(s => s === 'correct')) {
    gameOver = true;
    showMessage(`You win ‚Äî ${solution}`);
    showShare();
  } else if (r === ROWS - 1) {
    gameOver = true;
    showMessage(`Game over ‚Äî ${solution}`);
    showShare();
  } else {
    curRow++;
    curCol = 0;
  }
}


  function markKey(letter,state){
    if(!letter) return;
    const keys = Array.from(document.querySelectorAll('.key'));
    const target = keys.find(k=>k.textContent===letter);
    if(!target) return;
    // prioritize correct > present > absent
    if(state==='correct'){ target.classList.remove('present','absent'); target.classList.add('correct'); }
    else if(state==='present' && !target.classList.contains('correct')){ target.classList.remove('absent'); target.classList.add('present'); }
    else if(state==='absent' && !target.classList.contains('correct') && !target.classList.contains('present')){ target.classList.add('absent'); }
  }

  function updateTile(r,c){
    const tile = document.getElementById(`tile-${r}-${c}`);
    tile.textContent = board[r][c] || '';
    tile.classList.toggle('filled', !!board[r][c]);
  }

  function showMessage(txt,timeout=2000){
    messageEl.textContent = txt;
    if(timeout>0){ setTimeout(()=>{ if(messageEl.textContent===txt) messageEl.textContent=''; }, timeout); }
  }

  function showShare(){
    const rows = [];
    for(let r=0;r<=curRow;r++){
      if(status[r].every(s=>s==='')) continue;
      rows.push(status[r].map(s=> s==='correct' ? 'üü©' : s==='present' ? 'üü®' : '‚¨õ').join(''));
    }
    const txt = `Wordle Clone ‚Äî ${rows.length}/${ROWS}\n` + rows.join('\n');
    shareArea.innerHTML = `<pre style="white-space:pre-wrap">${txt}</pre><button class="btn" id="copyBtn">Copy</button>`;
    document.getElementById('copyBtn').addEventListener('click',()=>{ navigator.clipboard.writeText(txt).then(()=>showMessage('Copied!')) });
  }

  // keyboard and physical keys
  document.body.addEventListener('keydown', (e)=>{
    if(gameOver) return;
    const k = e.key.toUpperCase();
    if(k === 'ENTER') onKey('ENTER');
    else if(k === 'BACKSPACE') onKey('BACK');
    else if(k.length===1 && /[A-Z]/.test(k)) onKey(k);
  });

  // new game
  document.getElementById('newBtn').addEventListener('click', ()=>{
    solution = ANSWERS[Math.floor(Math.random()*ANSWERS.length)];
    resetGame();
  });

  document.getElementById('shareBtn').addEventListener('click', ()=>{ showShare(); });

  function resetGame(){
    curRow=0;curCol=0;gameOver=false;board = Array.from({length:ROWS},()=>Array.from({length:COLS},()=>""));status = Array.from({length:ROWS},()=>Array.from({length:COLS},()=>""));
    buildBoard(); buildKeyboard(); messageEl.textContent=''; shareArea.innerHTML='';
  }

  // init
  buildBoard(); buildKeyboard();

  // expose for debugging (optional)
  window._wc = {solution, resetGame};
  </script>
</body>
</html>
